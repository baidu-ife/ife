define("eventManager",function(require,exports,module){var t=Array.prototype.slice,e=(document,{on:function(t,e){var i=this.callbacks||(this.callbacks={}),a=i[t]||(i[t]=[]);a.push(e)},off:function(t,e){var i,a;if((i=this.callbacks)&&(a=i[t])){if(!e)return void(a=[]);for(var s=0;s<a.length;s++)(a[s]=e)&&a.splice(s,1)}},trigger:function(){var e,i,a=t.call(arguments,0),s=a.shift();if((e=this.callbacks)&&(i=e[s]))for(var r=0;r<i.length;r++)i[r].apply(this,a)}});module.exports=e}),define("taskEditView",["mvc","taskModel"],function(require,exports,module){var t=require("mvc"),e=require("taskModel").Model_Task,i=t.View.extend({model:e,initialize:function(){this.hasEditedUnSave=!1},show:function(t){var e=this.elements;t||(t={header:"",time:"",content:""}),e.headerDom.value=t.header,e.timeDom.value=t.time,e.contentDom.value=t.content,addClass(this.root,"z-show")},hide:function(){this.clear(),removeClass(this.root,"z-show")},hasChanged:function(){return this.hasEditedUnSave},clear:function(){var t=this.elements;t.headerDom.value="",t.timeDom.value="",t.contentDom.value="",this.hasEditedUnSave=!1}});module.exports=i}),define("taskDetailView",["mvc","taskModel"],function(require,exports,module){var t=require("mvc"),e=require("taskModel").Model_Task,i=t.View.extend({model:e,refresh:function(t){var e=this.elements;e.headerDom.innerHTML=t.header,e.timeDom.innerHTML=t.time,e.contentDom.innerHTML=t.content,1==t.status?this.hideOperateBtns():this.showOperateBtns()},hideOperateBtns:function(){addClass(this.elements.operateBtnDom,"z-hide")},showOperateBtns:function(){removeClass(this.elements.operateBtnDom,"z-hide")}});module.exports=i}),define("mvc",["eventManager"],function(require,exports,module){var t=(Array.prototype.slice,document,require("eventManager"));!function(){"function"!=typeof Object.create&&(Object.prototype.create=function(t){function e(){}return e.prototype=t,new e}),Math.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}).toUpperCase()}}();var e=function(t){t||(t={}),this.cid=Math.guid(),this.id="undefined"!=typeof t.id?t.id:this.cid,this.attributes={id:this.id},this.set(t),this.initialize.apply(this,arguments)};e.prototype={constructor:e,initialize:function(){},set:function(){var t=arguments[0];for(var e in t)t.hasOwnProperty(e)&&(this.attributes[e]=t[e]);this.trigger("change")},get:function(t){return this.attributes[t]},toJSON:function(){return this.attributes},clone:function(){var t=this.constructor,e=new t(this.attributes);return e},save:function(t){localStorage.setItem(t||this.id,JSON.stringify(this)),this.trigger("change")},fetch:function(t){var e=JSON.parse(localStorage[t]);this.set(e),this.trigger("change")},destroy:function(t){localStorage.removeItem(t||this.id)}},$.extend(e.prototype,t);var i=function(t){t||(t={}),t.model&&(this.model=t.model),this.records={},this.cid=Math.guid(),this.id="undefined"!=typeof t.id?t.id:this.cid,this.initialize.apply(this,arguments)};i.prototype={constructor:i,initialize:function(){},_getNextId:function(){var t=[],e=this.records;for(var i in e)e.hasOwnProperty(i)&&t.push(parseInt(e[i].id));if(t.length<=0)return 0;var a=Math.max.apply(Math,t);return a+1},addItem:function(t){if(t.constructor===this.model)this.records[t.id]=t;else{{var e=this.model;new e(t)}this.records[t.id]=t}},removeItem:function(t){var e=this.records;if("object"==typeof t){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t)return void delete e[i]}else e[t]&&delete e[t]},save:function(t){var e=[],i=this.records;for(var a in i)i.hasOwnProperty(a)&&e.push(i[a]);localStorage.setItem(t||this.id,JSON.stringify(e)),this.trigger("change")},count:function(){var t=0,e=this.records;for(var i in e)e.hasOwnProperty(i)&&t++;return t},fetch:function(t){var e=JSON.parse(localStorage[t]);this.populate(e),this.trigger("change"),this.trigger("fetch")},populate:function(t){this.records={};for(var e=this.model,i=0;i<t.length;i++)this.records[t[i].id]=new e(t[i])},find:function(t){var e=this.records;for(var i in e)if(e.hasOwnProperty(i)&&e[i].id==t)return e[i]},destroy:function(t){localStorage.removeItem(t||this.id),this.records={}}},$.extend(i.prototype,t);var a=function(t,e){this.root=t,this.cid=Math.guid(),this.id="undefined"!=typeof e.id?e.id:this.cid,this.events=e.events,this.elements=e.elements||{},e.modelList&&(this.modelList=e.modelList),this.initialize.call(this,e),e.handlers&&this.addEventHandler(e.handlers),this.events&&this.createEvent()};a.prototype={constructor:a,eventSpliter:/^(\w+)\s*(.*)$/,initialize:function(){var t=arguments[0];isFunction(t.initialize)&&t.initialize.call(this)},$:function(t){return $(t,this.root)},createEvent:function(){for(var t in this.events){var e=this.events[t],i=this.proxy(this[e]),a=t.match(this.eventSpliter),s=a[1],r=a[2];""===r?$.on(this.root,s,i):$.delegate(this.root,r,s,i)}},addEventHandler:function(t){var e=this.constructor.prototype;for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},proxy:function(t){var e=this;return function(){t.apply(e,arguments)}}},$.extend(a.prototype,t);var s=function(t){var e,i=this;if(e=function(){i.apply(this,arguments)},e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__super__=i.prototype,$.extend(e,i),"initialize"in t){var a=t.initialize,s=e.__super__.initialize;t.initialize=function(){s.apply(this,arguments),a.apply(this,arguments)}}return $.extend(e.prototype,t),e};e.extend=a.extend=i.extend=s,exports.Model=e,exports.View=a,exports.List=i}),define("viewController",function(require,exports,module){var t,e=document,i=null,a={},s=[],r=function(){var t=e.createElement("a");return addClass(t,"segue-view-btn"),addClass(t,"z-hide"),$.on(t,"click",function(t){c()}),$(".web-hd").appendChild(t),t},n=function(t){var e;if("string"==typeof t||"number"==typeof t){if(e=a[t],!e)return;removeClass(i.root,"z-active"),addClass(e.root,"z-active"),i=e}else"object"==typeof t&&(e=t,removeClass(i.root,"z-active"),addClass(e.root,"z-active"),i=e)},o=function(t,e){a[e||Date.now()]=t},d=function(e){n(e),s.push(e),removeClass(t,"z-hide")},c=function(){if(!(s.length<2)){2===s.length&&addClass(t,"z-hide");var e=(s.pop(),s[s.length-1]);n(e)}},l={init:function(e,n){for(var o=0;o<e.length;o++)this.addView(e[o],e[o].id);n&&"object"!=typeof n&&(n=a[n]),n||(n=e[0]),addClass(n.root,"z-active"),i=n,s.push(n),t=r()},addView:o,pushView:d,popView:c};module.exports=l}),define("tip",function(require,exports,module){var t,e,i,a=document,s={tipDom:null,show:function(i){var s=this;null==this.tipDom?(this.tipDom=this.createElement(i),a.body.appendChild(this.tipDom)):this.tipDom.innerHTML=i,t&&clearTimeout(t),t=setTimeout(function(){addClass(s.tipDom,"in")},10),e&&clearTimeout(e),e=setTimeout(function(){s.hide()},3e3)},hide:function(){var t=this;removeClass(t.tipDom,"in"),i&&clearTimeout(i),i=setTimeout(function(){a.body.removeChild(t.tipDom),t.tipDom=null},410)},createElement:function(t){var e=a.createElement("div");return e.innerHTML=t,addClass(e,"tip"),addClass(e,"fade"),addClass(e,"out"),e}};module.exports=s}),define("taskInfoView",["mvc","taskDetailView","taskEditView","taskModel"],function(require,exports,module){var t=require("mvc"),e=require("taskDetailView"),i=require("taskEditView"),a=require("taskModel").Model_Task,s=t.View.extend({model:a,initialize:function(){var t=this;this.detailView=new e($("#taskDetail"),{elements:{headerDom:this.$(".header"),contentDom:this.$(".content"),timeDom:this.$(".time"),operateBtnDom:this.$(".operates")},events:{"click #completeTask":"completeTaskHandler","click #editTask":"editTaskHandler"},handlers:{completeTaskHandler:function(e){return window.confirm("确定完成任务了吗？")?(t.updateTask({status:1}),void this.hideOperateBtns()):!1},editTaskHandler:function(e){t.showEdit()}}}),this.editView=new i($("#taskEdit"),{elements:{headerDom:this.$("#inputHeader"),contentDom:this.$("#inputContent"),timeDom:this.$("#inputTime")},events:{"click #sure":"sureHandler","click #cancel":"cancelHandler","change input":"valueHasChangeHandler","change textarea":"valueHasChangeHandler"},handlers:{sureHandler:function(e){this.hasEditedUnSave=!1;var i=this.elements,a=i.headerDom.value,s=i.contentDom.value,r=i.timeDom.value;if(""===a||""===s)return void Tip.show("内容和标题不能为空");if(!/^\d{4}-\d{1,2}-\d{1,2}$/.test(r))return void Tip.show("日期格式不对");var n={header:a,content:s,time:r};t.updateTask(n)},cancelHandler:function(e){return this.hasChanged()&&!window.confirm("有未保存的内容，确认关闭？")?!1:void t.showDetail()},valueHasChangeHandler:function(t){this.hasEditedUnSave=!0}}}),this.curTask=new a,this.curContentView="detail",this.curTaskIsNew=!1},showEdit:function(){var t={header:this.curTask.get("header"),time:this.curTask.get("time"),content:this.curTask.get("content")};return this.editView.show(t),this.curContentView="edit",!0},showDetail:function(){var t={header:this.curTask.get("header"),time:this.curTask.get("time"),content:this.curTask.get("content"),status:this.curTask.get("status")};return this.editView.hide(),this.detailView.refresh(t),this.curContentView="detail",!0},hasChanged:function(){return this.editView.hasChanged()},updateTask:function(t){this.isCreatingTask?(this.trigger("addNewTask",{attrs:t,success:function(t){this.curTask=t}}),this.isCreatingTask=!1):(this.curTask.set(t),this.trigger("updateCurTask",{theTask:this.curTask}))},willAddTask:function(){if("edit"===this.curContentView){if(this.hasChanged()&&!window.confirm("有未保存的内容，确认关闭？"))return!1;this.editView.clear()}else this.editView.show();this.curContentView="edit",this.isCreatingTask=!0},selectTaskItem:function(t){return"detail"===this.curContentView?(this.curTask=t,this.showDetail(),!0):"edit"===this.curContentView?this.hasChanged()&&!window.confirm("有未保存的内容，确认关闭？")?!1:(this.curTask=t,this.showDetail(),!0):void 0}});module.exports=s}),define("categoryListView",["mvc","categoryModel"],function(require,exports,module){var t=require("mvc"),e=require("categoryModel").Model_Category,i=t.View.extend({model:e,addCategoryItem:function(t,e){var i,a=this.categoryList,s=a.addCategoryItem(t,e),r=this.createElement(s);if(-1==e)this.$(".categorys").appendChild(r);else if(i=this.curCategoryItemDom){addClass(i,"has-sub-category"),addClass(i,"z-open");var n;"ul"==i.lastChild.tagName.toLowerCase()?n=i.lastChild:(n=document.createElement("ul"),addClass(n,"sub-category")),n.appendChild(r),i.appendChild(n)}a.save(a.localStorageName)},removeCategoryItem:function(t,e,i){var a=this.categoryList,s=this.taskList;if(a.removeCategoryItem(t,e),s.removeTaskByCategoryId(t),s.save(s.localStorageName),a.save(a.localStorageName),i===this.curCategoryItemDom){var r=getNextSiblingElement(i);r||(r=i.parentNode.firstChild),r===i&&(r=i.parentNode.parentNode),1!==window.os.phone&&this.selectCategoryItemHandler({target:r})}var n=i.parentNode;if(hasClass(n,"sub-category")&&n.childNodes.length<=1){var o=n.parentNode;o.removeChild(n)}else n.removeChild(i);this.$("#allTaskNum").innerHTML=s.getTaskCount()},createElement:function(t){var e=document.createElement("li"),i=t.get("id");return e.setAttribute("data-id",i),addClass(e,"level"),e.innerHTML='<a class="category-name" data-id="'+i+'">'+t.get("name")+'(<span class="num">'+this.getTaskCountOfCategoryId(i)+"</span>)</a>",0!=t.id&&(e.innerHTML+='<a class="del" data-id="'+i+'">&times;</a>'),e},getTaskCountOfCategoryId:function(t){var e=this.taskList,i=e.getCountOfCategoryId(t);return i},addCategorys:function(t){var e={},i=document.createDocumentFragment();for(var a in t)if(t.hasOwnProperty(a)){var s=t[a],r=s.get("parId");e[r]||(e[r]=[]);var n=this.createElement(s);e[r].push({dom:n,category:s}),s.dom=n}for(var a in e)if(e.hasOwnProperty(a)){var o=e[a];if(-1==a)for(var d=0;d<o.length;d++)addClass(o[d].dom,"level-1"),i.appendChild(o[d].dom);else{var c=document.createElement("ul");addClass(c,"sub-category");for(var d=0;d<o.length;d++)c.appendChild(o[d].dom);var l=t[a].dom;addClass(l,"has-sub-category"),l.appendChild(c)}}i&&this.$(".categorys").appendChild(i)},setCurCategoryItemDom:function(t){this.curCategoryItemDom&&removeClass(this.curCategoryItemDom,"z-active"),addClass(t,"z-active"),hasClass(t,"has-sub-category")&&toggleClass(t,"z-open"),this.curCategoryItemDom=t},addNewTaskToUpdateNum:function(){var t=this.taskList;if(this.curCategoryItemDom){var e=getElementsByClassName(this.curCategoryItemDom,"num")[0],i=parseInt(e.innerHTML);i++,e.innerHTML=i,this.$("#allTaskNum").innerHTML=t.getTaskCount()}}});module.exports=i}),define("taskListView",["mvc","taskModel"],function(require,exports,module){var t=require("mvc"),e=require("taskModel").Model_Task,i=t.View.extend({model:e,refresh:function(){var t,e=this.groupByTime(),i=[],a=document.createDocumentFragment();for(var s in e)e.hasOwnProperty(s)&&i.push(s);i.sort(function(t,e){t=t.split("-"),e=e.split("-");var i=new Date(t[0],t[1],t[2]),a=new Date(e[0],e[1],e[2]);return a-i});for(var s,r=0;r<i.length;r++)s=i[r],t=this.createSectionDom(s,e[s]),a.appendChild(t);var n=this.$(".tasks");n.innerHTML="",a.childNodes.length>0?n.appendChild(a):n.innerHTML='<p class="no-task-tip">还没有任务哦</p>'},addTaskDom:function(t){this.allTaskArr.push(t),"done"!==this.curFilterStatus&&this.curTaskArr.push(t),this.refresh()},updateTaskDom:function(t){this.refresh()},createSectionDom:function(t,e){var i=document.createElement("section");return addClass(i,"time-node"),i.innerHTML='<p class="title">'+t+"</p>",i.innerHTML+=this.createTaskItemDom(e),i},createTaskItemDom:function(t){for(var e,i,a="",s=0;s<t.length;s++)e=t[s],i=1==e.get("status")?"item done":"item",a+='<a data-id="'+e.get("id")+'" class="'+i+'">'+e.get("header")+"</a>";return a},groupByTime:function(){var t;if(t=this.curTaskArr){for(var e,i={},a=0;a<t.length;a++)e=t[a],i[e.get("time")]||(i[e.get("time")]=[]),i[e.get("time")].push(e);return i}},setCurTaskItemDom:function(t){this.curTaskItemDom&&removeClass(this.curTaskItemDom,"z-active"),addClass(t,"z-active"),this.curTaskItemDom=t},filterByStatus:function(t){var e,i=[];switch(t){case"all":for(var a=0;a<this.allTaskArr.length;a++)i.push(this.allTaskArr[a]);return i;case"done":e=1;break;case"undone":e=0}for(var a=0;a<this.allTaskArr.length;a++)this.allTaskArr[a].get("status")==e&&i.push(this.allTaskArr[a]);return i}});module.exports=i}),define("taskModel",["mvc"],function(require,exports,module){var t=require("mvc"),e=t.Model.extend({}),i=t.List.extend({model:e,addTask:function(t){var e=this.model,i=new e({id:this._getNextId(),header:t.header,content:t.content,time:t.time,status:t.status,categoryId:t.categoryId});return this.addItem(i),i},getTask:function(t){return this.find(t)||null},removeTask:function(t){},removeTaskByCategoryId:function(t){var e=this.records;for(var i in e)e.hasOwnProperty(i)&&e[i].get("categoryId")==t&&this.removeItem(e[i].get("id"))},filterTaskByCategoryId:function(t){var e=this.records,i=[];for(var a in e)e.hasOwnProperty(a)&&e[a].get("categoryId")==t&&i.push(e[a]);return i},getCountOfCategoryId:function(t){var e=this.filterTaskByCategoryId(t);return e.length},getTaskCount:function(){var t=this.records,e=0;for(var i in t)t.hasOwnProperty(i)&&t[i]instanceof this.model&&e++;return e}});exports.Model_Task=e,exports.List_Task=i}),define("categoryModel",["mvc"],function(require,exports,module){var t=require("mvc"),e=t.Model.extend({}),i=t.List.extend({model:e,addCategoryItem:function(t,e){var i=this.model,a=new i({id:this._getNextId(),name:t,number:0,parId:e});return this.addItem(a),a},removeCategoryItem:function(t,e){if(e){var i=this.records;for(var a in i)i.hasOwnProperty(a)&&i[a].get("parId")==t&&this.removeCategoryItem(a,e);this.removeItem(t)}else this.removeItem(t)},getCategoryItem:function(t){return this.find(t)||null}});exports.Model_Category=e,exports.List_Category=i}),define("app",["categoryModel","taskModel","taskListView","categoryListView","taskInfoView","tip","viewController"],function(require,exports,module){function t(){localStorage[c]?h.fetch(c):(h.addTask({header:"说明",content:["<h4>To Do App ------ by 叶喽喽</h4>",'<p style="margin:10px 0;">耦合，耦合，严重耦合！！一定是我MV*的姿势用的不对！</p>',"<h5>实现说明：</h5>",'<ul style="padding-left:15px">界面：',"    <li>1. 3栏布局；</li>","    <li>2. 自适应宽高（border-box真实太好用了）；</li>","    <li>3. 加号的实现，没有使用加号符；</li>","    <li>4. 多级列表的样式；</li>","    <li>5. 界面响应移动设备；</li>","    <li>6. 不兼容ie8</li>","</ul>",'<ul style="padding-left:15px">功能：',"    <li>1. 尝试MV*的设计模式开发，MV*库的实现参考简化backbone；</li>","    <li>2. 存储－localStorage；</li>","    <li>3. 多级列表的加载；</li>","    <li>4. 没有依赖任何第三方库；</li>","    <li>5. js行数：1800上下</li>","</ul>",'<blockquote style="margin:10px 0 25px;">具体实现信息请参考总结</blockquote>','<p style="font-weight:bold">多看代码少装逼！</p>'].join(""),status:1,time:"2015-5-11",categoryId:0}),h.addTask({header:"更新及其他",content:['<h4 style="margin-bottom:5px">更新日志</h4>',"<p>2015.5.16 － 模块化</p>","<p>2015.5.14 － 简单的响应移动端</p>","<p>2015.5.10 － 初版发布</p>","<br><br>",'<h4 style="margin-bottom:5px">其他</h4>',"<ul>",'    <li><a style="color:blue;" href="https://github.com/yyzych/Blog/issues/6">项目总结</a></li>','    <li><a style="color:blue;" href="https://github.com/yyzych/Blog/issues/6">问题提交</a></li>',"</ul>"].join(""),status:1,time:"2015-5-8",categoryId:0}),h.addTask({header:"to do 4",content:"to do 4 content",status:0,time:"2015-5-11",categoryId:1}),h.save(c)),localStorage[d]?l.fetch(d):(l.addCategoryItem("默认分类",-1),l.addCategoryItem("百度ife项目",-1),l.addCategoryItem("毕业设计",-1),l.addCategoryItem("社团活动",-1),l.save(d),l.fetch(d))}var e=require("categoryModel").List_Category,i=require("taskModel").List_Task,a=require("taskListView"),s=require("categoryListView"),r=require("taskInfoView"),n=require("tip"),o=require("viewController"),d="CategoryRecord",c="TaskRecord",l=new e,h=new i,u=new r($("#taskInfo"),{initialize:function(){this.on("selectedTaskChange",function(t){var e,i=t.taskId;e=h.getTask(i),"function"==typeof t.success||(t.success=function(){}),this.selectTaskItem(e)&&t.success()}),this.on("updateCurTask",function(t){var e=t.theTask;e&&(h.save(c),m.updateTaskDom(e),n.show("保存成功"))}),this.on("addNewTask",function(t){var e=t.attrs;if(e){if(e.categoryId=parseInt(g.curCategoryId),-1==e.categoryId)return void n.show("请先选择分类");e.status=0;var i=h.addTask(e);h.save(c),m.addTaskDom(i),g.addNewTaskToUpdateNum(),t.success&&t.success.call(this,i),n.show("添加成功")}})}}),m=new a($("#taskList"),{events:{"click .fileter-item":"filterByStatusHandler","click .add-task":"addTaskHandler","click .item":"selectTaskHandler"},initialize:function(){this.curTaskId=null,this.curTaskItemDom=null,this.curTaskArr=[],this.allTaskArr=[],this.curFilterStatus="all",this.on("selectedCategoryChange",function(t){var e=t.categoryId;null!=e&&(this.allTaskArr=h.filterTaskByCategoryId(e),this.curTaskArr=this.filterByStatus(this.curFilterStatus),this.refresh(),1!==window.os.phone&&this.selectTaskHandler({target:getElementsByClassName($(".tasks"),"item")[0]||null}))})},handlers:{filterByStatusHandler:function(t){t=t||window.event;var e=t.target||t.srcElement;e=e.parentNode;for(var i=getElementsByClassName(this.root,"inline-item"),a=0;a<i.length;a++)removeClass(i[a],"z-active");addClass(e,"z-active"),this.curFilterStatus=e.getAttribute("data-value"),this.curTaskArr=this.filterByStatus(this.curFilterStatus),this.refresh()},addTaskHandler:function(t){u.willAddTask(),1===window.os.phone&&o.pushView(u)},selectTaskHandler:function(t){t=t||window.event;var e=t.target||t.srcElement;if(e){var i=e.getAttribute("data-id"),a=this;u.trigger("selectedTaskChange",{taskId:i,success:function(){a.curTaskId=i,a.setCurTaskItemDom(e)}}),1===window.os.phone&&o.pushView(u)}}}}),g=new s($("#categoryList"),{id:1,events:{"click .add-category":"addCategoryHandler","click .del":"removeCategoryItemHandler","click .category-name":"selectCategoryItemHandler","click .bd":"removeCurCategoryIdHandler"},initialize:function(){this.curCategoryItemDom=null,this.curCategoryId=-1,this.taskList=h,this.taskList.localStorageName=c,this.categoryList=l,this.categoryList.localStorageName=d;var t=this;l.on("fetch",function(e){t.$("#allTaskNum").innerHTML=h.getTaskCount(),t.$(".categorys").innerHTML="",t.addCategorys(this.records),1!==window.os.phone&&t.selectCategoryItemHandler({target:t.$(".categorys").firstChild})})},handlers:{addCategoryHandler:function(t){var e=this.curCategoryId||-1;if(0==e)return void n.show("不能给“默认分类”添加子级分类");var i=window.prompt("请输入类别名称");i&&this.addCategoryItem(i,e)},removeCurCategoryIdHandler:function(){this.curCategoryId=-1,this.curCategoryItemDom&&removeClass(this.curCategoryItemDom,"z-active")},selectCategoryItemHandler:function(t){t=t||window.event;var e=t.target||t.srcElement,i=e.getAttribute("data-id");this.curCategoryId=i,this.setCurCategoryItemDom(hasClass(e,"level")?e:e.parentNode),m.trigger("selectedCategoryChange",{categoryId:i}),1===window.os.phone&&o.pushView(m)},removeCategoryItemHandler:function(t){t=t||window.event;var e,i=t.target||t.srcElement,a=!1;if(hasClass(i.parentNode,"has-sub-category")?(e=window.confirm("删除所有子类别及其任务，确定删除吗"),a=!0):e=window.confirm("同时删除该分类下的所有任务，确定删除吗"),e){var s=i.getAttribute("data-id");null!=s&&this.removeCategoryItem(s,a,i.parentNode)}}}});t(),1===window.os.phone&&o.init([g,m,u])});